{% extends 'ctm_admin/base/index.html' %}
{% load static %}
{% block title %}
Add Product
{% endblock title %}


{% block content %}
<div class="col-lg-12 m-1">
    <div class="card">
        <div class="card-header">
            <h4>Add Product</h4>
        </div>
        <div class="card-body">
            <br>
            <h5>Product Basic Details</h5>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_name">Name</label>
                        <input type="text" class="form-control" id="id_name" name="name" placeholder="Product Name">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_slug">Slug</label>
                        <input type="text" class="form-control" id="id_slug" name="slug" placeholder="Product Url">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_brand">Brand</label>
                        <input type="text" class="form-control" id="id_brand" name="brand" placeholder="Brand">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_category">Category</label>
                        <select name="subcategory" id="id_category" class="form-select">
                        <option value="" selected>Choose...</option>
                        {% for v in data %}
                        <optgroup label="{{v.category}}">
                            {% for d in v.subcategory %}
                            <option value="{{d.id}}">{{d}}</option>
                            {% endfor %}
                        </optgroup>
                        {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_sku">Product Sku</label>
                        <input type="text" class="form-control" id="id_sku" name="sku" placeholder="Product Sku">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_seller">Seller User</label>
                        <select class="form-select" name="seller" id="id_seller">
                            <option selected value="">Choose...</option>
                            {% for v in seller %}
                            <option value="{{v.id}}">{{v.user_type.user}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mt-2">
                        <label for="id_quantity">Product Stock</label>
                        <input type="number" min="0" step="1" class="form-control" id="id_quuantity" name="quantity" placeholder="quantity">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-5">
                    <div class="form-group mt-2">
                        <label for="id_old_price">Old Price</label>
                        <input type="number" name="old_price" id="id_old_price" min='0' step="0.01" placeholder="0.00" class="form-control">
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="form-group mt-2">
                        <label for="id_offer">Offer</label>
                        <div class="input-group">
                            <input type="number" name="offer" id="id_offer" min='0' max="100" step="1" aria-describedby="basic-addon2" placeholder="0%" class="form-control">
                            <div class="input-group-append">
                                <span class="input-group-text" id="basic-addon2">%</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="form-group mt-2">
                        <label for="id_new_price">New Price</label>
                        <input type="number" name="new_price" id="id_new_price" min='0' step="0.01" placeholder="0.00" class="form-control">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="form-group mt-1">
                        <label for="id_product_short">Product Short Description</label>
                        <textarea class="form-control" placeholder="Short Description...." name="product_short_description" id="id_product_short" cols="30" rows="5"></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="form-group mt-1">
                        <label for="product_long_description">Product Long Description</label>
                        <textarea class="form-control" name="product_long_description" id="product_long_description" cols="30" rows="10"></textarea>
                    </div>
                </div>
            </div>
            <br>
            <hr>
            <h5>Product Specifications</h5>
            <div class="row mt-1">
                <div class="col-md-3">
                    <div class="mt-2 form-check form-switch">
                        <label for="id_is_active">Is Active</label>
                        <input type="checkbox" id="id_is_active" name="is_active" class="form-check-input">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mt-2 form-check form-switch">
                        <label for="id_is_featured">Featured</label>
                        <input type="checkbox" id="id_is_featured" name="is_featured" class="form-check-input">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mt-2 form-check form-switch">
                        <label title="No shipping required (ex: online book pdf)" for="id_is_digital">Digital</label>
                        <input title="No shipping required (ex: online book pdf)" type="checkbox" id="id_is_digital" name="is_digital" class="form-check-input">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mt-2 form-check form-switch">
                        <label for="id_is_bestselling">Bestselling</label>
                        <input type="checkbox" id="id_is_bestselling" name="is_bestselling" class="form-check-input">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mt-2 form-check form-switch">
                        <label for="id_return_allowed">Return Allowed</label>
                        <input type="checkbox" id="id_return_allowed" name="return_allowed" class="form-check-input">
                    </div>
                </div>
            </div>
            <br>
            <hr>
            <h5>Product Media</h5>
            <div class="media_div">
                <div class="row first_media">
                    <div class="col-md-4">
                        <div class="form-group mt-2">
                            <label for="id_media_type">Media Type</label>
                            <select class="form-select" name="media_type" id="id_media_type">
                                <option selected value="">Choose...</option>
                                <option value="1">Image</option>
                                <option value="2">Video</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group mt-2">
                            <label for="id_select_media">Select Media</label>
                            <input type="file" class="form-control" name="select_media" id="id_select_media">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label>Preview</label>
                        <img style="width:70%; display:none;" class="image_preview" alt="image">
                        <video style="width:70%; display:none;" class="video_preview">hhh</video>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-6">
                    <button class="btn btn-success w-100 add_media" type="button">Add Media Content</button>
                </div>
                <div class="col-md-6">
                    <button type="button" class="btn btn-danger w-100 remove_media">Remove Media Content</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById("id_name").onkeyup=function(){
        document.getElementById("id_slug").value=document.getElementById("id_name").value.toLowerCase().replace(/[^\w ]+/g,'').replace(/ +/g,'-');
    };
</script>
<script>
    $(".add_media").click(function(){
        var media_row = $(".first_media").clone();
        media_row.removeClass('first_media');
        media_row.replaceAll('src','');
        $(".media_div").append(media_row);
    });
</script>


{% if editor.editor == 'TinyMCE' %}
<script>
    tinymce.init({
        selector: '#product_long_description',
        plugins: 'a11ychecker advcode casechange export formatpainter image editimage linkchecker autolink emoticons lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tableofcontents tinycomments tinymcespellchecker',
        toolbar: 'media a11ycheck addcomment showcomments casechange checklist code export formatpainter image editimage pageembed permanentpen table tableofcontents emoticons',
        toolbar_mode: 'floating',
        tinycomments_mode: 'embedded',
        tinycomments_author: 'Author name',
    });
</script>
{% else %}
<script>
    CKEDITOR.replace( 'product_long_description', {
        skin:'moono',
        extraPlugins: 'codesnippet,editorplaceholder,embed,autoembed,image2',
        codeSnippet_theme: 'monokai_sublime',
        editorplaceholder: 'Start typing here...',
        embed_provider: 'https://ckeditor.iframe.ly/api/oembed?url={url}&callback={callback}&api_key=6ebca5bda576af3d0f1faa',
        image2_alignClasses: ['image-align-left', 'image-align-center', 'image-align-right'],
        image2_disableResizer: true,
        height: 380,
        removeButtons: 'PasteFromWord'
    } );
</script>
{% endif %}
{% endblock content %}

{% block scripts_top %}
<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
{% if editor.editor == 'TinyMCE' %}
<script src="https://cdn.tiny.cloud/1/brffh1txjfz0f4byqyup0lsm9my705onsw592h4flbm5zxi0/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
{% else %}
<script src="https://cdn.ckeditor.com/4.19.1/full-all/ckeditor.js"></script>
{% endif %}
{% endblock scripts_top %}